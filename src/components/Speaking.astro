---
import CfmLogo from '@/assets/logos/compressed-fm-logo.svg'
import { Image } from 'astro:assets'
import { getSpeakingData } from '@/utils/speaking-helpers'

const speaking = (await getSpeakingData({ limit: 1 }))[0] ?? {
  title: 'No speaking engagements found',
  description: 'No speaking engagements found',
}
---

<section
  class="mt-12 flex flex-col gap-8 rounded-lg bg-black/80 p-8 text-white">
  <header class="text-center">
    <h2 class="text-xl font-bold uppercase sm:text-4xl">
      Listen to my latest talk
    </h2>
  </header>

  <div class="flex flex-col items-center gap-4 border p-4 rounded-xl w-full md:w-2/3 mx-auto">
    <h3 class="text-xl text-center">{speaking.title}</h3>
    <Image src={CfmLogo} alt="CFM Logo" width={200} height={200} />
    <p class="text-center text-sm text-gray-400">{speaking.description}</p>
  </div>

  <div class="flex justify-center gap-4 uppercase">
    <a
      href={speaking.link}
      target="_blank"
      rel="noopener noreferrer"
      class="rounded-lg border border-white p-2 text-white hover:bg-white hover:text-black">
      Watch
    </a>
    <a
      href="/speaking"
      class="rounded-lg border border-white p-2 text-white hover:bg-white hover:text-black">
      View all
    </a>
  </div>
</section>
