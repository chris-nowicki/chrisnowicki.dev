---
import { cn } from '../utils/utils'
import {
  buttonVariants,
  type ButtonVariant,
  type ButtonSize,
} from '../lib/buttonVariants'

type Variant = NonNullable<ButtonVariant>
type Size = NonNullable<ButtonSize>

export interface Props {
  href: string
  ariaLabel?: string
  class?: string
  target?: '_blank' | '_self'
  rel?: string
  variant?: Variant
  size?: Size
}

const {
  href,
  ariaLabel,
  class: className = '',
  target = '_self',
  rel,
  variant = 'default',
  size = 'default',
  ...rest
} = Astro.props

const isExternal = target === '_blank'
const linkRel = isExternal ? rel || 'noopener noreferrer' : rel
const classes = cn(buttonVariants({ variant, size, className }))
---

<a
  href={href}
  target={target}
  rel={linkRel}
  aria-label={ariaLabel}
  class={classes}
  {...rest}
  data-astro-prefetch>
  <slot />
</a>
